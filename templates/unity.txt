## Unity CMake template       ##
##                            ##
## Part of Updater            ##
##                            ##
## @author Daniel J. Finnegan ##
## @date September 2017       ##

# Automatically generated by Updater v >>>>>{version_number}
# @author >>>>>{author_name}
#
# The Unity Updater template is only supported on OSX and Windows
#

cmake_minimum_required (VERSION 2.8)
cmake_policy (SET CMP0048 NEW)

project (
	>>>>>{projname}
	VERSION
		1.0
)

set (
	AUTO_APP_NAME
		>>>>>{appname}
)

if (APPLE) # We only support OSX or Windows, both 64 bit

add_custom_target (
	${AUTO_APP_NAME}
	ALL
	COMMAND
		/Applications/Unity/Unity.app/Contents/MacOS/Unity
		-quit
		-batchmode
		-logFile ${CMAKE_BINARY_DIR}/logs/Editor.log
		-projectPath ${CMAKE_SOURCE_DIR}/Unity/
	COMMENT
		"Building ${AUTO_APP_NAME}..."
)

elseif (WIN32) # We only support OSX or Windows, both 64 bit

add_custom_target (
	${AUTO_APP_NAME}
	ALL
	COMMAND
		"C:/Program Files/Unity/Editor/Unity.exe"
		-quit
		-batchmode
		-projectPath ${CMAKE_SOURCE_DIR}/Unity
		-buildWindows64Player
		${CMAKE_SOURCE_DIR}/build/${AUTO_APP_NAME}.exe
	COMMENT
		"Building ${AUTO_APP_NAME}..."		
)

else () # Just echo a statement on any other system

add_custom_target (
	${AUTO_APP_NAME}
	ALL
	COMMAND
		echo "Only supported on OSX and Windows, soz!"
)