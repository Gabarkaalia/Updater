# Automatically generated by Updater v 1.0
# @author Daniel J. Finnegan
#
# The Unity Updater template is only supported on OSX and Windows
#

cmake_minimum_required (VERSION 2.8)
cmake_policy (SET CMP0048 NEW)

project (
	Updater
	VERSION
		1.5.1
	LANGUAGES
		NONE
)

set (
	AUTO_APP_NAME
		Installer
)

set (
	INSTALLER_NAME
		Application-Installer
)

if (WIN32) # We only support Windows for now

# Note that the version number and product name are passed to the NSIS script
add_custom_target (
	${AUTO_APP_NAME}
	ALL
	COMMAND
		"C:/Program Files (x86)/NSIS/makensis.exe"
		"/XOutFile ${CMAKE_SOURCE_DIR}/${PROJECT_NAME}_v${PROJECT_VERSION_MAJOR}.${PROJECT_VERSION_MINOR}.${PROJECT_VERSION_PATCH}.exe"
		"/X!define PRODUCT_NAME ${PROJECT_NAME}"
		${CMAKE_SOURCE_DIR}/updater-installer.nsi
	COMMENT
		"Building ${AUTO_APP_NAME}..."
)

else () # Just echo a statement on any other system

add_custom_target (
	${AUTO_APP_NAME}
	ALL
	COMMAND
		echo "Only supported on Windows, soz!"
)

endif()