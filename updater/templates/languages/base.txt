## Unity CMake template       ##
##                            ##
## Part of Updater            ##
##                            ##
## @author Daniel J. Finnegan ##
## @date September 2017       ##

# Automatically generated by Updater v>>>>>{version_number}
# @author >>>>>{author_name}

cmake_minimum_required (VERSION 2.8)
cmake_policy (SET CMP0048 NEW)

project (
	>>>>>{projname}
	VERSION
		1.0
	LANGUAGES
		>>>>>{proj_languages}
)

# Change this to whatever you want to call your built application
# It will also set the name of the product installer built with NSIS
set (
	AUTO_APP_NAME
		>>>>>{appname}
)

set (
	AUTO_PRODUCT_NOTE
		">>>>>{appnote}"
)

option (
	BUILD_INSTALLER
		"Build the project installer (requires NSIS in the PATH variable)"
)

if (BUILD_INSTALLER)

set (
	INSTALLER_NAME
		>>>>>{installer_name}
)

set (
	COMPANY_NAME
		>>>>>{companyname}
)

# Note that the version number and product name are passed to the NSIS script
add_custom_target (
	${INSTALLER_NAME}
	ALL
	DEPENDS
		${AUTO_APP_NAME}
	COMMAND
		"C:/Program Files (x86)/NSIS/makensis.exe"
		"/XOutFile ${CMAKE_SOURCE_DIR}/build/${AUTO_APP_NAME}_v${PROJECT_VERSION_MAJOR}.${PROJECT_VERSION_MINOR}-Installer.exe"
		"/X!define PRODUCT_NAME ${AUTO_APP_NAME}"
		"/X!define PRODUCT_NOTE '${AUTO_PRODUCT_NOTE}'"
		"/X!define COMPANY_NAME ${COMPANY_NAME}"
		"/X!define UNINSTALLER_NAME ${AUTO_APP_NAME}-Uninstaller"
		"/X!define PRODUCT_ROOT_DIR ${CMAKE_SOURCE_DIR}"
		${CMAKE_SOURCE_DIR}/scripts/installer.nsi
	COMMENT
		"Building ${INSTALLER_NAME}..."
)

endif()

